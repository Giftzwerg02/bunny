<!DOCTYPE html>
<html>
    <head>
        <title>Bunny Presentation</title>
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
        >
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
            @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500&display=swap');
            
            body {
                font-family: 'Roboto', sans-serif;
                margin: 0;
                padding: 0;
                background: white;
                color: #333;
                overflow: hidden;
            }
            
            .slideshow-container {
                position: relative;
                width: 100%;
                height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .slide {
                display: none;
                text-align: center;
                padding: 3rem;
                max-width: 800px;
                animation: fadeIn 0.5s ease-in-out;
            }
            
            .slide.active {
                display: block;
            }
            
            .slide h1 {
                font-size: 5rem;
                margin-bottom: 3rem;
                font-weight: 300;
                color: #333;
                letter-spacing: -2px;
            }
            
            .slide h2 {
                font-size: 3rem;
                margin-bottom: 2rem;
                font-weight: 300;
                color: #333;
                letter-spacing: -1px;
            }
            
            .slide ul {
                list-style: none;
                padding: 0;
                font-size: 2.2rem;
                line-height: 1.8;
                font-weight: 300;
            }
            
            .slide li {
                margin: 0.8rem 0;
                color: #555;
            }
            
            .slide p {
                font-size: 1.8rem;
                margin-top: 3rem;
                color: #555;
                font-weight: 300;
            }
            
            .slide pre {
                background: #f8f9fa;
                border-radius: 8px;
                padding: 1.5rem;
                margin: 2rem 0;
                text-align: left;
                overflow-x: auto;
                border: 1px solid #e9ecef;
            }
            
            .slide code {
                font-family: 'Roboto Mono', monospace;
                font-size: 1rem;
                line-height: 1.4;
                color: #333;
            }
            
            .slide .inline-code {
                background: #f8f9fa;
                padding: 2px 6px;
                border-radius: 4px;
                font-family: 'Roboto Mono', monospace;
                font-size: 0.9em;
            }
            
            .slide .comment {
                color: #6a737d;
                font-style: italic;
            }
            
            .slide .keyword {
                color: #d73a49;
                font-weight: 500;
            }
            
            .slide .string {
                color: #032f62;
            }
            
            .slide .number {
                color: #005cc5;
            }
            
            .slide .function {
                color: #6f42c1;
            }
            
            .slide .type {
                color: #22863a;
            }
            
            .slide .bullet-points {
                text-align: left;
                max-width: 600px;
                margin: 0 auto;
            }
            
            .slide img {
                max-width: 100%;
                height: auto;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            }
            
            .slide .small-text {
                font-size: 1.2rem;
                color: #666;
                font-style: italic;
            }
            
            .slide-counter {
                position: fixed;
                bottom: 30px;
                right: 30px;
                color: #999;
                font-size: 0.9rem;
                font-weight: 400;
            }
            
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            
            .keyboard-hint {
                position: fixed;
                bottom: 30px;
                left: 30px;
                font-size: 0.9rem;
                color: #999;
                font-weight: 400;
            }
        </style>
    </head>
    <body>
        <div class="slideshow-container">
            <!-- Slide 1 -->
            <div class="slide active">
                <h1>Bunny</h1>
                <p class="small-text">&lt;bunny logo here&gt;</p>
            </div>
            
            <!-- Slide 2 -->
            <div class="slide">
                <h2>is an</h2>
                <ul>
                    <li>immutable</li>
                    <li>deterministic</li>
                    <li>functional</li>
                    <li>interpreted</li>
                    <li>lazy</li>
                    <li>statically-typed</li>
                    <li>strongly-typed</li>
                </ul>
                <p style="font-size: 1.8rem; margin-top: 3rem; color: #555; font-weight: 300;">language for creating graphs.</p>
            </div>
            
            <!-- Slide 3 -->
            <div class="slide">
                <h1>Show me the code.</h1>
            </div>
            
            <!-- Slide 4 -->
            <div class="slide">
                <h1>Yes, it's a LISP.</h1>
                <p class="small-text"><em>(Without homoiconicity)</em></p>
                <pre><code><span class="comment">; Fibonacci function</span>
(<span class="keyword">def</span> <span class="function">fib</span> (n) 
    (<span class="function">foldl</span>
        (<span class="keyword">\</span> (acc num) (
            (<span class="keyword">def</span> l (<span class="function">len</span> acc))
            (<span class="keyword">def</span> f1 (<span class="function">get</span> acc (<span class="function">-</span> l <span class="number">1</span>)))
            (<span class="keyword">def</span> f2 (<span class="function">get</span> acc (<span class="function">-</span> l <span class="number">2</span>)))
            (<span class="function">append</span> acc (<span class="function">+</span> f1 f2))
        ))
        [<span class="number">0</span> <span class="number">1</span>]
        (<span class="function">range</span> <span class="number">0</span> n)
    )
)

(<span class="function">fib</span> <span class="number">20</span>)</code></pre>
            </div>
            
            <!-- Slide 5 -->
            <div class="slide">
                <h1>Quick Technical Rundown</h1>
            </div>
            
            <!-- Slide 6 -->
            <div class="slide">
                <h1>Lexer, Parser, Scoping</h1>
                <div class="bullet-points">
                    <ul>
                        <li>Extremely simple due to minimal syntax of the language (<span class="inline-code">def</span> and <span class="inline-code">\</span> as the <strong>only</strong> keywords!)</li>
                        <li>Variable declaration and visibility checking done in a single pass (enforced define before use)</li>
                    </ul>
                </div>
            </div>
            
            <!-- Slide 7 -->
            <div class="slide">
                <div class="bullet-points">
                    <p>Lexer / Parser written in <span class="inline-code">pest</span>:</p>
                </div>
                <pre><code><span class="type">program</span> = _{ <span class="keyword">SOI</span> ~ <span class="type">func_call</span> ~ <span class="keyword">EOI</span> }

<span class="type">expr</span> = { 
     <span class="type">float</span> 
     | <span class="type">int</span> 
     | <span class="type">string</span> 
     | <span class="type">array</span> 
     | <span class="type">dict</span>
     | <span class="type">func_call</span> 
     | <span class="type">color</span> 
     | <span class="type">identifier</span>
}</code></pre>
            </div>
            
            <!-- Slide 8 -->
            <div class="slide">
                <h1>Typechecker</h1>
                <p>Implements Hindley-Milner's <em>Algorithm J</em></p>
                <pre><code><span class="comment">; Can infer generics</span>
(<span class="keyword">def</span> arr [[<span class="number">1</span> <span class="number">2</span>] [<span class="number">3</span> <span class="number">4</span>] [<span class="number">5</span> <span class="number">6</span>]]) <span class="comment">; array[array[int]]</span>

<span class="comment">; Does not require type annotations, even for complex types</span>
(<span class="keyword">def</span> <span class="function">last</span> (a) (<span class="function">get</span> a (<span class="function">-</span> (<span class="function">len</span> a) <span class="number">1</span>)))
(<span class="keyword">def</span> <span class="function">first-of-last</span> (<span class="function">compose1</span> last first)) <span class="comment">; array[array['6]] -> '6</span>

<span class="comment">; Supports let-polymorphism</span>
(<span class="keyword">def</span> <span class="function">id</span> (x) x) 
(<span class="function">get</span> (<span class="function">id</span> [<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>]) (<span class="function">id</span> <span class="number">0</span>)) <span class="comment">; => 1</span></code></pre>
            </div>
            
            <!-- Slide 9 -->
            <div class="slide">
                <h1>Runner</h1>
                <div class="bullet-points">
                    <p>Converts the AST into an IR that rust can run:</p>
                </div>
                <pre><code><span class="keyword">pub</span> <span class="keyword">type</span> <span class="type">LazyType</span>&lt;T&gt; = <span class="type">Arc</span>&lt;<span class="type">LazyCell</span>&lt;T, <span class="type">Box</span>&lt;<span class="keyword">dyn</span> <span class="type">FnOnce</span>() -&gt; T&gt;&gt;&gt;;

<span class="comment">#[derive(Debug, Clone)]</span>
<span class="keyword">pub</span> <span class="keyword">enum</span> <span class="type">Lazy</span> {
    <span class="function">Int</span>(<span class="type">LazyType</span>&lt;<span class="type">i64</span>&gt;),
    <span class="function">Float</span>(<span class="type">LazyType</span>&lt;<span class="type">f64</span>&gt;),
    <span class="function">String</span>(<span class="type">LazyType</span>&lt;<span class="type">ImString</span>&gt;),
    <span class="function">Color</span>(<span class="type">LazyType</span>&lt;<span class="type">Srgba</span>&lt;<span class="type">u8</span>&gt;&gt;),
    <span class="function">Opaque</span>(<span class="type">LazyType</span>&lt;<span class="type">Element</span>&gt;), <span class="comment">// internal repr of SVGs</span>
    <span class="function">Array</span>(<span class="type">LazyType</span>&lt;<span class="type">Vector</span>&lt;<span class="type">Lazy</span>&gt;&gt;),
    <span class="function">Dict</span>(<span class="type">LazyType</span>&lt;<span class="type">HashMap</span>&lt;<span class="type">Value</span>, <span class="type">Lazy</span>&gt;&gt;),
    <span class="function">Lambda</span>(<span class="type">LazyType</span>&lt;<span class="type">LazyLambda</span>&gt;),
}</code></pre>
            </div>
            
            <!-- Slide 10 -->
            <div class="slide">
                <div class="bullet-points">
                    <ul>
                        <li>Result: A tree of function-pointers (<span class="inline-code">LazyCell</span>s)!</li>
                        <li>Control structures are implemented using laziness:</li>
                    </ul>
                </div>
                <pre><code><span class="comment">#[forall a | cond:int() => iftrue:a => iffalse:a => ret:a]</span>
<span class="keyword">fn</span> <span class="string">"if"</span>(<span class="type">Lazy</span>::<span class="function">Int</span>(cond), iftrue, iffalse){
    <span class="function">lazy!</span>([iftrue -&gt; i1, iffalse -&gt; i2], {
        <span class="keyword">if</span> <span class="function">eval!</span>(cond) != <span class="number">0</span> {
            <span class="function">eval!</span>(i1)
        } <span class="keyword">else</span> {
            <span class="function">eval!</span>(i2)
        }
    })
}</code></pre>
                <div class="bullet-points">
                    <p>(<span class="inline-code">if</span> is just a function)</p>
                </div>
            </div>
            
            <!-- Slide 11 -->
            <div class="slide">
                <h1>Fibonacci</h1>
                <p class="small-text">notice something?</p>
                <div style="text-align: right; margin-top: 2rem;">
                    <img src="../imgs/hyperfine.svg" alt="Fibonacci benchmark" style="width: 700px; height: 700px;">
                </div>
            </div>
            
            <!-- Slide 12 -->
            <div class="slide">
                <h1>Demo Time</h1>
                <img src="../imgs/giphy.webp" alt="Demo gif" style="max-width: 80%; margin-top: 2rem;">
            </div>
        </div>
        
        <div class="slide-counter">
            <span id="current-slide">1</span> / <span id="total-slides">12</span>
        </div>
        
        <div class="keyboard-hint">
            Use arrow keys to navigate
        </div>
        
        <script>
            let currentSlide = 0;
            const slides = document.querySelectorAll('.slide');
            const totalSlides = slides.length;
            
            document.getElementById('total-slides').textContent = totalSlides;
            
            function showSlide(n) {
                slides[currentSlide].classList.remove('active');
                currentSlide = (n + totalSlides) % totalSlides;
                slides[currentSlide].classList.add('active');
                
                document.getElementById('current-slide').textContent = currentSlide + 1;
            }
            
            function changeSlide(direction) {
                if (direction === 1 && currentSlide < totalSlides - 1) {
                    showSlide(currentSlide + 1);
                } else if (direction === -1 && currentSlide > 0) {
                    showSlide(currentSlide - 1);
                }
            }
            
            // Keyboard navigation
            document.addEventListener('keydown', function(event) {
                if (event.key === 'ArrowRight' || event.key === ' ') {
                    changeSlide(1);
                } else if (event.key === 'ArrowLeft') {
                    changeSlide(-1);
                } else if (event.key === 'Home') {
                    showSlide(0);
                } else if (event.key === 'End') {
                    showSlide(totalSlides - 1);
                }
            });
            
            // Initialize
            showSlide(0);
        </script>
    </body>
</html>